import "mocha" // using @types/mocha
import { expect } from "chai"
import { EthProofs } from "../../src/index"
import { getEthHeaderParseOptions } from "../../src/common"
import { addCompletionHooks } from "../mocha-hooks"

addCompletionHooks()

describe('Ethereum Storage Proofs', () => {

  it("Should compute mapping slots for a contract", () => {
    const data = [
      { addr: "0x5B38Da6a701c568545dCfcB03FcB875f56beddC4", idx: 1, output: "0x36306db541fd1551fd93a60031e8a8c89d69ddef41d6249f5fdc265dbc8fffa2" },
      { addr: "0x4fa97b031428427ea36B8aDC91D9CB8Ba623F884", idx: 1, output: "0x998248fdc5b7b1d92420008502788c86e9d2075c997efd36254eb498729f099c" },
      { addr: "0x5C3ba3f01CB9Fa7429e7098dd89128b6378b22DE", idx: 1, output: "0x0213953694b427d8f8665bbbc81e58cb9fa05d85f1eb7ee22104c49f9300b40f" },
      { addr: "0xC69Bca872148FaC44a31d1922dd926dea34691F7", idx: 1, output: "0x9942f197e4f58df3c3c91803f59e36320cbb69ef8bd9fad0ca42530dd72532b6" },
      { addr: "0x1F5C3d9956314a5B48BbAb512567582C3FDd4814", idx: 1, output: "0xf4405451b973266bb605a12e1313ae240c8439c378025b544dce0e34e647691e" },
      { addr: "0xB9dCe9de05459a24294406a36D925869C4593b8A", idx: 1, output: "0x9420d1514c615c08c9665f50b7358e806e34c12e09ec3933d6b0dde95121ba6b" },
      { addr: "0x27271634805ADf966CD287157d643F0e7b41767a", idx: 1, output: "0x3221764d0ceea698a12be8ae8a2600d0e3bb26cad5d862c12f641f4831e1f804" },
      { addr: "0x19d1c7de23afC63a61aaf070187D6Fb8c243C64d", idx: 1, output: "0x360835ceba0d2e3baff887c2b7315a24a2bcab2701dd8e7c297782bcb314c7eb" },
    ]

    for (let item of data) {
      expect(EthProofs.getMapSlot(item.addr, item.idx)).to.eq(item.output)
    }
  })

  it("Should compute array slots", () => {
    const data = [
      { idx: 0, output: "0x290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e563" },
      { idx: 1, output: "0xb10e2d527612073b26eecdfd717e6a320cf44b4afac2b0732d9fcbe2b7fa0cf6" },
      { idx: 2, output: "0x405787fa12a823e0f2b7631cc41b3ba8828b3321ca811111fa75cd3aa3bb5ace" },
      { idx: 3, output: "0xc2575a0e9e593c00f959f8c92f12db2869c3395a3b0502d05e2516446f71f85b" },
      { idx: 4, output: "0x8a35acfbc15ff81a39ae7d344fd709f28e8600b4aa8c65c6b64bfe7fe36bd19b" },
      { idx: 5, output: "0x036b6384b5eca791c62761152d0c79bb0604c104a5fb6f4eb0703f3154bb3db0" },
      { idx: 6, output: "0xf652222313e28459528d920b65115c16c04f3efc82aaedc97be59f3f377c0d3f" },
      { idx: 7, output: "0xa66cc928b5edb82af9bd49922954155ab7b0942694bea4ce44661d9a8736c688" },
      { idx: 8, output: "0xf3f7a9fe364faab93b216da50a3214154f22a0a2b415b23a84c8169e8b636ee3" },
      { idx: 9, output: "0x6e1540171b6c0c960b71a7020d9f60077f6af931a8bbf590da0223dacf75c7af" },
    ]

    for (let item of data) {
      expect(EthProofs.getArraySlot(item.idx)).to.eq(item.output)
    }
  })

  it('Should verify a storage proof', async () => {
    const storageRoot = "0x67112e931a0e90f399d3b9b87c217df4410731395ef90649692199c676b62fb0"
    const storageProof = {
      "key": "0xbb68a47d5da9c117ae8a139bc647ecaad9137bf7b80cc87b8140d70ce9ff7b69",
      "value": "0x1312d00",
      "proof": [
        "0xf90211a00c12386d091b85c4e30df2532d45e466a03a03a4ff491aaef3ccb5cd149cd57da04dbb408692f8d72fb508efb8a3ed80a4e6b45c2bb5760cf8ac9a8cdbdc1a952fa069f41829e016a10c661c89930e2333d89a2a4e3a7bad40ffe5c976388d2a9c5ea079f8d9fc1b7be70e788668480ea41192e5349ab47d2fcfb3d5d9b8ba4eac5248a03d450371a557dcd23a489a32b3a8c3ad53554e7583df4288b16551b07835ced5a03db7d966bfe47a930de10bae752494af0552fcc033022741bea4d84ea298b110a0a49b1b032b3bf1804a0f000b74ffb35a6b0ea5995a1d1c7174e8931bac6ec409a0bc91c9c620f574c33ec91dcceab418b0ba52350b22d9bde76a96244e115ea44aa0bd4ca3b952b6c8fa420844c88f06b888352b42ec2c9779ad27a297f32af96369a02bcd5dfffa276ad3254fbf8be2f042e502da17fdef140fe978b83422ec5b8d39a014ac089db39aac280d81b1318352bc989a5109f8c3bfe67e0cda31429efd6981a0046147b0e19c7a5eb4bfcfe1c6631cac75d994f785aa320106ea8aee1eeb5514a0458b5b0b6e9ec7ab9a1df0003c752bb8122f94e50f76b673e1e445f755664eb0a067c772e3976bba2209678e0f7b6cde45679aea931808cb036ada7af01c5e2bc4a03becb72d6dbcc85048a04e4d20707c7c37223ddb0de61bf0ef083bcc85a9ebcea0e4ea0d2bb338e6d57c637d7cb697500ea6a1a34c60fe8001b12f2a234d856f9480",
        "0xf90211a065341d93555afdd0217f1c338f5aa443a8792662ae2a258871befa736955de0ca07856ef690449c0231160b644b3256d9e82e648967382bd3c994f1aad45d62aeea0a37699d0fd0d69e91336434435ba34cf211f78a0c608b2f005f7c232145253dfa08d8882be60bd729ffca6c3fb1b119bc74e2cda7ec58f0971a70ac2f72b17c900a0ba7a2e7f128d49df69c9bc1158b9397ce23ae4646847db1a24e8b3f99963f813a07abdcbcbd3d5cda6669f3a10e6c78fc7e4c91ba50a94347528876a37fac1df85a0d97c97cd1e6b14307cda315f09a85693206b17f7af624e12317b866bbdd1a6eea0cddd2ca612c774f9ac9c092954259875a4416e449796f7bbaed19b3ed91c55e0a01a5b8fbfd64ef02765dddccb936c008c7cce9d4516efe11e1bcc268471f176f4a035af58b02ef1deb9c957185702a4fcfabfc89e066579495a91be1535e6475840a05c4deb2f0757266ed832491f01132a03f65b41db443a851cb7abde598e1f9475a08b5e49a5449aca02d1a2fdaa562460e98915cd4a9de54a3e50f70491559db72da02f22086f8be2c7df33fe154158af84cd9528e4d56d1e74b1053e5701ac6abc3ea01d11c95deb1d51fc701e430ceeb5de2e1fdbf420635677f25ac9dd44d6057bf3a049c5f66037614513712c5ddd8f4f8d4103373df87662b662faade97806e4261fa0097f905533700da4f8c827c50bc9f6b719c83ad246baf3a66adccc0808c7348d80",
        "0xf90211a0467fce1a3f0779f59ed94a849980c18e327e652d1b9c19f518e58554f26363b8a0e7ef690a832eedf1ee714aa1289c2988a51788ec02edced42c75e657e9e612f3a0d6ad2e6bb1ae8a8c04cd18a71b7f3548fa3243f81f98dc8233a29de59b37cb04a0000eebb6b4d3f81864278b247967c635529d4274783ec57877087244de548445a0c1086820607c73ba05fbf874850da94ea0f60f7e630d79f72da59f130363d417a073702f2cc8d142c7303e3c939d1fe1ef5b866a051050f26baa6133d91642e825a0a7022e1a428aabaf5fbd263ad840527ca8618d2790040d88f9c492d9455ac4d0a09c7c35628e68364eb7c46d8a2a5bfe0fe27266dcb4b4e1953f6da30871d1b33aa0cd432b12643e5c58c3bb7c5a8f25bf616277782bd5ab9f7b5e171ba073362cd5a0ff38da3d9fefd0f3a77b963c32fd98f763150791c12e6f8ace530861e34c3574a0510456b405120dc4146bc48f5150808fe3782ad158654d34555aab85b4ba854ba011758e71f5be7b4735cfaf33da8ecfa3ac31630a71ebbd4791b9322165d8869aa0b637d0b6aadd6ddb365c8c56728c9c81a440a58ba4a155471cff16ccd18a356ca094960672cae65405a1b49a5775e92c6e76d0f23cf9b259cf57ce084a90f9e015a0caedec354cf68c91841dd4e884eded1cfab242e28c10a4d9d23b5d51401c5e2da04babacccdc2c40cbcf466e8c07104f66785211c3d3b8cc3a57700c6fc838b93c80",
        "0xf90211a0f35c4394590c86a1d4cb36d0491cc45e5940cbcc048d1be43f212b800d715b17a0ad113dade0ad42918903cc1ad3bf4f2f34d609087a0370275f64a6aeccc48d60a0d671641ff4dd0077dba20ed8d0faa7a71c2c5c6c41077e2d97e500d37f11db4ca071e5b1e12caf9b1dbb18daeeb69eef67729dbe5a0dac8cae73eaab60bac6dbf6a0366d87ffefc528c51f3782b967aaf884bbae8801526357ebc41a7bd4998d535ea0bdeb3134bddac3647e535401e393e9c8609fbf0dce7e21ece2323de453c53acfa059dda4cd4f09cc9cd1ce03c9263565562f76c3a288f3b2ae9784b65db94f0c1aa02a574b3145f0b5cf7e7925f1ab0947631e85e8f91a1814a32d24ab9c23dff58ea0c7c07c3301587bec4b26e37f9e438a48cd53c0491ab3f09ac5899133e219c153a0301ae6d3990e49af5b3cf9ae73a593e7c158de8ee6d2b96a179b919e675a1deca00deec05e05d1bab41160f3d140be68692c1035dfeabf9eb8bd00cb83d45406ffa0c99d5ac0c4b4eb78d1d52749812c313a3429d7dc97690a52825360f695b7d527a0f102df1ef5c085b42a884c2886a39d92807540f5a988ca3a6c791f91bb2fed92a0fd95781d11300fcba2210db9b3a68e64dc1ae74ac0b294c7492e22b37780d01aa00165102edd039bdfa88b46787871f36abf4535397d6663a16833ae21e654fd73a0d41e67eec1b1df5f4c7d4e0bbfe3e3e591367fb3dc449730f81c5a6b1475376e80",
        "0xf901b1a0f5fe7f22f179ed8b0a43d6475812bd4c3a54fef06fcb264e3ab6a17428392257a058aa04fa7a40687f6bd94396338da8b0cf98e72ed78e207519d8d0da51cbf47da0db28fff1b4a7f6da752d048941a73f3f3c000b081aefd2b8ca71ded7530a2c34a018b2a07e748b1628efcee915a4cdbb66c43b6842ce18a348aaf0722804078812a079261f3df78ce0f52929dea38175f03b695ab82b159a079a6c668d1e5b26882aa04125eaf9cf377c20c6c710747ccd60d4671dc2180bab3ab19ac7cb1eeb91d8788080a027fadb7e168e0fbe94b41936983bf8dbf6d552db358a140302ab07f965e7d2e880a0d76876fe32ec9777cc1b4deff2866418b47f6f3620f139d5e52053acb2881a64a0acf871b77c04ede4b0ec90e463570bc691ede0b38c818c00b68e460bab57edeaa0fc02d66e10f237a17b7d4075423f9e2edb3d784f48cd96cb021f329647cbd657a0a15bc966a929651faae3ab83e62a9cd1f6307fd8791ec529cbcb744dfb8184eba097f67873ac18ac623205ca8ee8da43fd9779110b8ad4b4c1b56634a4b55c18e3a03ddb79bb5c94526d8259df5dbaf32bef8b44966d0f87ab4512a75b31247f208180",
        "0xf871808080a0e223f84836f50d4d77979eafc01c0de9fb0bc4f4b8b9db6c81777cc48ddbdde380a0e7ac2a9defb162ca10febf20c738c7f34685260b8fb23e9f13fef654350d813f80808080808080a0c425e2a84a822a2be053bc9e344a35084df3eef13ee86c6f144c7ef6d7f6db67808080",
        "0xe59e20065c06fe4702946a5cd3b0b790acd1df3bee304a795e85862ba4d8157a858401312d00"
      ]
    }

    const valid = await EthProofs.verifyStorageProof(storageRoot, storageProof)

    expect(valid).to.eq(true)
  })

  it("Should verify an account proof", async () => {
    const proof = {
      accountProof: [
        '0xf90211a02dc5664519c2f9a15325ecbf814d531a3906643a59c2a803dacc74afdba1c7efa07cb20b964b83806d63b646f8a4eee57e4b88cde0bb34d7d91512bf7cb70152b6a0b54f5e4daf0bab4f03e7ad3f44754c59f330635a44e5886a52c35c2ef83bba68a02cf70c4f5c834a12604a878ca30faf7852f2301dc020ca40189725b025d38dd9a069fce48d98adc2a6fd1093d8fe2897a594b3983ca1bf6ac294414b425b56196da024c569bddc5987c74f038d526198b04d18510ee4b78ab7d6cc03792345e35554a005476b69dfb250b71070690bd4b6db985a949810e561be7b3f881f10d45086e6a00406627d9d650420202b789e60041b343b67efc2771aca434bb6e5fba861b897a04e4790dac987da41a3bc9a4ee3fb2b36584c7006aad1cd5ccdd4392ccea08484a0f4d212ceb509de986942db6aa437dfbe2b42d8430e2c491f0c50f43f1efe378fa0810f3b7220e2794a2e1d269d335c9ea7990fd0de0afe81141755d251599e9e26a00ca806df090f530f2a37d5adb9491a7f32c8536f514548dc3366bac83c1d1026a01b855d0021e877699f8ba229d073eb5fdbd6f3e1b4445774976ff81625eee79ca0d85e1021c2dd92423d72f0d398bfbf095425a9bcceb0d80bfada4b96d1c50e32a0d7b57a1c154251d128dc9d7177899ddb80b82c9ce69fda7e31435fe21cd3cb7ba01dd3f21c81c29746ca629518942e777453026e8702d61d90e28487ef49e4864e80',
        '0xf90211a0d767a33d10ed0e8f67c8e1d504ba5a738c28a8365b4dc34cf7d70371e269dcb4a04304c406db7c175b841643964a48d3b72f88ced00af68314ef8b9c2801aadf7ca0b3e51ad18b9d46d234c8815f946253e8c05c39f36245a21743e2956b4d55f1c1a08d9c613f3645d19911a9c21847cb2e950df60b4408d091928ac15cfa9ef37359a09f3cb0b76e48a26e7de777da6f9bc33e892825cfbb38e70404a0b726e7ded07aa02669afe314a7c6095024404b74149f9f45e0ad74e29840a4555df15a64ba1219a0271b06d443b55c52e5a65aaef04a8072f1b7d4b0464f28abc9ea4a039bc9fdeea0c7283262344fc5e4f260ffa7a5f365161ad95631d0550bc1339e192ae5330c5da02e89484294c338ee26974123f2ea8bbc9b75aa46d6e1bdc71037956426bb0228a09edc976c28b57775520328456d26b31e587af71725149e6a21c8afef24c5c941a09113a853dd18d974f8172df4c99df07e5937f6b9c9ea82f99571c1484d550ae4a008b93dada8bbe1a003bcf261aa72c46fed8f8d9c026e83578cc563f0abea58e8a0b44718849ed56b8b1b087ba24885262c2b29a4517010d0bf05377545c9207d75a048601db42cd87adb484600ead7674d4eee9960d6db0b87123aedf97c8fcd9de6a03b2ad1632162a2a0e1df8d867e2064398e0c8af9eef9e6ee24e61f095bb3f019a005ce142b7660703a1e6fadbee9080d986d0016e320dfbb995512680feaac72de80',
        '0xf90211a0379498ef77f191bcf1d1da37f21e26b2ae6998bf338ca35a9f852e8601344c30a0eb2f2bd78a1a1d4ff6e4278195d4f3de40e70fffb2265d56bac60bd314e7e2fea07a318dbb5e0e46b608db2bb940e32450932f110339549ebfde724beacc402c64a073cfad215d8f7596ae478dac5e707dd9dda86f7958e368ce0dcf66852423d1a8a0e9c29a1fbe82ee46448d933c44a5e5576f0f995e7c8f35f4194ad582344765f6a059dc1fdabc44d112a5021c0f1e2514412c769c007f44a71c919e452b7c4cd734a059b89d156e912f7abf4d47367611c8c5b218f919370070db7e749cf1488e423ba0d9636659f0db444f78db942ac670b8f33fdde0d36e51f0c316f31144ea2391f2a0a7293bc6a85326b272ca7579e69dbb6e2a1fea70df8619ebceb1b844d6598236a0ba0d38160bc7b255b6c18242aa8c75a21a3100fd6a1b3c44e875236da98c9172a0afb540730afd2f2abfca13548ee7eddb534c91932f3cff18a08dea87c1e3ca7aa0818748bebbcc14ff5430e2eab9686a938ff0e67d1fef503c6ccfd317457ba4aba0abafd3447846dc9df4ac17e4f2984a14da290896b8777dd8aeb6333d5d956596a0d6c93002737c68b1f0a961067d2f3f5081b14b671e318b8d9be60721f64e8755a03edb85bf983fbbf8931b36a2b33f59307431a809fcaa96b7b5ece8bf562158efa0002fdce8e3abe174a7210520d15fd5688998bff5e9bf0e0bbdebbfa3f709e44c80',
        '0xf90211a06a4d047a4792abe56575cf9f9aee912842eb1685f20d3f46d98ceb77c35c0b43a08af43f4757a2f79b397fb06c2169d03e96fd46e28495a64516f769adcc9f198aa0ad61ec5886bba394fc6009330d5b592342d510999da8c197262045f549dec167a073ab7c10be6c09063e1f4b238464eec51d71747104536cd043e5f7a96d0678c9a0b0be7033233025e94bc0dc06b3241fd81d7ea4d32fe7eba85c80d665a1cb37eda0e9d492ee51b49d12f4acf273b8f57981a2f41ce53b8129241b524be9fb5ddbeba0ea2e8265eac3b7802c7dfebb54b34e3f26192c9e54a973e0d355f5b3146aa37aa03a055ed136f41b7afc7b90bcd38c4071eba7f9208be0605fe691e0a766ee9389a038a1c39402eb603fbaaa70488186de235aa47039f722cd00e6025d6585c8a4b9a05eef99864be386da6438e3791047d15d9f978de8a8fdd3bce5e9d307b18f91cba0b42f1098c0f4f9d9d8e2953fad6f5afc6f9f7f3be75a39f3521106c52558af57a0a6813b684b6895041f8b2dda398d96a579fd837e5590555e00290ed280ac8d23a0fb5ee6a8f4d86ff94f63206b3465bb7ad4333c7c0eecc1ae12381daffee86d99a01009d1a5d89796c739ce69572482ad86de8904fa1113328aa9139ab18526c275a0be74b0b7356ba09c7e1f1febafab92d3fbdc3b127047641eccf79666f2395f3aa033f10aec2803a92cbacddc896738d30659653f818d807756bee1dd9b593cee6180',
        '0xf90211a02b1bef7469906ac06e3daa39beb157cd7ea57888524e8e5059c758ea651f8a46a0b08e22a349db632454b22c569cdfd1b546d5cc3b26fd8005d48431c838118d0fa0a139cfc1325d2d83aa1a4fff630cec1e1c395ff8895486330c85c3b471157139a0e23a3a5a03b0b2dd3610545a60956f22cd06df10de0e1c884a8499001bd04a54a0448db4ae05210ab9892653b6dedba0c0d28945acedd972969e87e06b01ae97fda0c893d1e7ff6ea56c2a4084a50e419863357da76370a733cfceebf3a89933e6ffa09bd7ac780cf904a6e5e56c8715cffedbbfbf821f934467666c7dfc1cc1fe84d0a0f1dc22ced0c28912726d64eef5a1e9039e06337d02ee28c8597eef893c88d340a0bbc260ecde3a619f4246269f02a463f6f8aae2937fecb14ea7a38b7045af0d78a0b51fd1befced4813ccba26c99062be34f4d84b2519eeea17800be8af68a97abea00fb1f7af4e09b0c4452f05402c18f2958f9731b8eb58715ad7acad87a7f1d02ca0dcc880aa616721551376635ef89a64b2b83b4e3d44be0a16bd08a10116b0b3d3a06c90241af964dbaaecf30c26a771b61781eb84fcac2c0d4374a222c1a6222174a00da827e00aa5eaf1b5f11f3d7facb24666480c875b08be26cc229f66c9c70cd6a0b8c1fe585dbc277ca84946b214a91d9258eec0a983ac2306f87aed18bf658ad6a0c1e497daf1f089b97b9d8a5b744038e45b762540e78c8e2be082cf2c599218a780',
        '0xf90211a0007dd7dbd837aed139221f449a71d0b4d8e8d496b62f515192f89377b7a54ce8a0816a701e02bc1484d167691ec621e91e3414034cec908cc400545a318a464b93a04eda27504c75434d02b26ff6f9cad4e7d9d85ce547bcfa9fb8a378b3c8104f2ca01a38add64244f891d3eef58e876bf69ecb5e9ee0f947d3933e0abf29062b785ea0bfd35cf141597ae9229bf6c9c84839f8da657f9573f4b126a016ffb93c959f6ba00307e38cfc701d13a9df486d9d3c913588654e6507137d3a6f006872df99a6baa052fed4a968126dc38a64b67432d5ee5815dd6ac0d90a5490c1993c59e0762a46a0fc04d6762e81b95c585319cb5adc7c162c7b6ef6eec2fde76d8bd7b36f5656e6a02eb618496d8c3ee495eabdf95af17e962d4b2b8e4e999a95f3ee6086a08397e7a066fa1350ddd655daddb5c51213c4f06d6dfc6e890fa50d73820e0ebd73881d71a08ffe89ff8042e2fbbcbaf38b5063b9ca1ba39d0e7239b90be00ce08f90866ae1a0925f54585014cc3222c6036b372f059cc9d223854a366bafce434a8a88f85306a0fafd890ce537aa755404596e02f093a14ca31270e11a25e067b06dc2db6b380ba0228d4d3ddcb934f5b2a4695fa0c6a6cead248fde842ccfc40121a106fe1108caa0b15b702a77776dc4e2f4748a2a952cba1e95b443479c4a06c824256636ce6a78a0a791ac69bad495b14eed3165758c26b6404e6243f45e6217580e065a7a150c8c80',
        '0xf8d180a0d7d633a58946d00ec7a1f93c1ca631df0a8673eae96370b6b72631a2907dfb77a020109805f7e2c937b8f329a424fecbb2a67ec3ccd55b48f7ead0dcca74c73d6480a0b40cabe387ab1ae0428e6acd4f45febed642e349e6ff78e5a0c05562312e524fa08ea99d2bb64a345ce2b71b68bca347bce6b8682a48398e889e78167d989067d58080a06da6a64497a321688bf2df91fadc67562ad61132cff63169753fccb53ead595e80a0b1de75c6a4686263aaf56231b6883e5e1f3567aa3e7213d7eceb729cc862ae09808080808080',
        '0xf8669d338cfc997a82252167ac25a16580d9730353eb1b9f0c6bbf0e4c82c4d0b846f8440180a0b524c70b702f2246687d647873fccfc5a0c5c9b3098689bfc016a314c122de31a04e36f96ee1667a663dfaac57c4d185a0e369a3a217e0079d49620f34f85d1ac7'
      ],
      address: '0x6b175474e89094c44da98b954eedeac495271d0f',
      balance: '0x0',
      codeHash: '0x4e36f96ee1667a663dfaac57c4d185a0e369a3a217e0079d49620f34f85d1ac7',
      nonce: '0x1',
      storageHash: '0xb524c70b702f2246687d647873fccfc5a0c5c9b3098689bfc016a314c122de31',
      storageProof: []
    }

    expect(() => EthProofs.verifyAccountProof(proof.storageHash, proof.address, proof)).to.not.throw
  })
  it("Should RLP encode an account proof")
  it("Should RLP encode a storage proof")

  it("Should handle London hard fork blocks") // getEthHeaderParseOptions
})
